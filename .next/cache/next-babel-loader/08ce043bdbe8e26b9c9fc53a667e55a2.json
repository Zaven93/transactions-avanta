{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport { Auth, Hub } from 'aws-amplify';\nvar initialFormState = {\n  username: '',\n  password: '',\n  email: '',\n  authCode: '',\n  formType: 'signUp'\n};\n\nvar Profile = function Profile() {\n  _s();\n\n  var _jsx;\n\n  var _useState = useState(initialFormState),\n      formState = _useState[0],\n      updateFormState = _useState[1];\n\n  var _useState2 = useState(null),\n      user = _useState2[0],\n      updateUser = _useState2[1];\n\n  useEffect(function () {\n    checkUser();\n  }, []);\n\n  var checkUser = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _user;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return Auth.currentAuthenticatedUser();\n\n            case 3:\n              _user = _context.sent;\n              updateUser(_user);\n              updateFormState(function () {\n                return _objectSpread(_objectSpread({}, formState), {}, {\n                  formType: 'signedIn'\n                });\n              });\n              console.log('User: ', _user);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9]]);\n    }));\n\n    return function checkUser() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onChange = function onChange(e) {\n    e.persist();\n    updateFormState(function () {\n      return _objectSpread(_objectSpread({}, formState), {}, _defineProperty({}, e.target.name, e.target.value));\n    });\n  };\n\n  var signUp = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var username, email, password;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              username = formState.username, email = formState.email, password = formState.password;\n              _context2.next = 3;\n              return Auth.signUp({\n                username: username,\n                password: password,\n                attributes: {\n                  email: email\n                }\n              });\n\n            case 3:\n              updateFormState(function () {\n                return _objectSpread(_objectSpread({}, formState), {}, {\n                  formType: 'confirmSignUp'\n                });\n              });\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function signUp() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var signIn = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var username, password, signedInUser, currentAuthenticatedUser;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              username = formState.username, password = formState.password;\n              _context3.next = 3;\n              return Auth.signIn(username, password);\n\n            case 3:\n              signedInUser = _context3.sent;\n              console.log('SignedIn user: ', signedInUser);\n              updateFormState(function () {\n                return _objectSpread(_objectSpread({}, formState), {}, {\n                  formType: 'signedIn'\n                });\n              });\n              _context3.next = 8;\n              return Auth.currentAuthenticatedUser();\n\n            case 8:\n              currentAuthenticatedUser = _context3.sent;\n              console.log('Current authenticated user', currentAuthenticatedUser);\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function signIn() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var confirmSignUp = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var username, authCode;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              username = formState.username, authCode = formState.authCode;\n              Auth.confirmSignUp(username, authCode);\n              updateFormState(function () {\n                return _objectSpread(_objectSpread({}, formState), {}, {\n                  formType: 'signIn'\n                });\n              });\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function confirmSignUp() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var formType = formState.formType;\n  console.log('State data', formState);\n  console.log('User state: ', user);\n  return __jsx(\"div\", null, formType === 'signUp' && __jsx(\"div\", null, __jsx(\"input\", {\n    name: \"username\",\n    placeholder: \"username\",\n    onChange: onChange\n  }), __jsx(\"input\", {\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"password\",\n    onChange: onChange\n  }), __jsx(\"input\", {\n    name: \"email\",\n    placeholder: \"email\",\n    onChange: onChange\n  }), __jsx(\"button\", {\n    onClick: signUp\n  }, \"Sign Up\")), formType === 'signIn' && __jsx(\"div\", null, __jsx(\"input\", {\n    name: \"username\",\n    placeholder: \"username\",\n    onChange: onChange\n  }), __jsx(\"input\", (_jsx = {\n    type: \"password\"\n  }, _defineProperty(_jsx, \"type\", \"password\"), _defineProperty(_jsx, \"placeholder\", \"password\"), _defineProperty(_jsx, \"onChange\", onChange), _jsx)), __jsx(\"button\", {\n    onClick: signIn\n  }, \"Sign In\")), formType === 'confirmSignUp' && __jsx(\"div\", null, __jsx(\"input\", {\n    name: \"authCode\",\n    placeholder: \"Confirmation code\",\n    onChange: onChange\n  }), __jsx(\"button\", {\n    onClick: confirmSignUp\n  }, \"Confirm sign up\")), formType === 'signedIn' && __jsx(\"div\", null, \"You've signed in successfully\"));\n};\n\n_s(Profile, \"ZFhPLrZ5xTXQKsno0vSDonPq0Bc=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["C:/Users/Admin/Desktop/transactions/pages/profile.js"],"names":["useState","useEffect","Auth","Hub","initialFormState","username","password","email","authCode","formType","Profile","formState","updateFormState","user","updateUser","checkUser","currentAuthenticatedUser","console","log","onChange","e","persist","target","name","value","signUp","attributes","signIn","signedInUser","confirmSignUp"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { Auth, Hub } from 'aws-amplify'\r\n\r\nconst initialFormState = {\r\n    username: '',\r\n    password: '',\r\n    email: '',\r\n    authCode: '',\r\n    formType: 'signUp'\r\n}\r\n\r\nconst Profile = () => {\r\n    const [formState, updateFormState] = useState(initialFormState)\r\n    const [user, updateUser] = useState(null)\r\n\r\n    useEffect(() => {\r\n        checkUser()\r\n    }, [])\r\n\r\n    const checkUser = async () => {\r\n        try {\r\n            const user = await Auth.currentAuthenticatedUser()\r\n            updateUser(user)\r\n            updateFormState(() => ({ ...formState, formType: 'signedIn' }))\r\n            console.log('User: ', user)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const onChange = (e) => {\r\n        e.persist()\r\n        updateFormState(() => ({ ...formState, [e.target.name]: e.target.value }))\r\n    }\r\n\r\n    const signUp = async () => {\r\n        const { username, email, password } = formState\r\n\r\n        await Auth.signUp({ username, password, attributes: { email } })\r\n        updateFormState(() => ({ ...formState, formType: 'confirmSignUp' }))\r\n    }\r\n\r\n    const signIn = async () => {\r\n        const { username, password } = formState\r\n\r\n        const signedInUser = await Auth.signIn(username, password)\r\n\r\n        console.log('SignedIn user: ', signedInUser)\r\n        updateFormState(() => ({ ...formState, formType: 'signedIn' }))\r\n\r\n        const currentAuthenticatedUser = await Auth.currentAuthenticatedUser()\r\n\r\n        console.log('Current authenticated user', currentAuthenticatedUser)\r\n    }\r\n\r\n    const confirmSignUp = async () => {\r\n        const { username, authCode } = formState\r\n\r\n        Auth.confirmSignUp(username, authCode)\r\n        updateFormState(() => ({ ...formState, formType: 'signIn' }))\r\n    }\r\n\r\n    const { formType } = formState\r\n\r\n    console.log('State data', formState)\r\n    console.log('User state: ', user)\r\n\r\n    return (\r\n        <div>\r\n            {formType === 'signUp' && (\r\n                <div>\r\n                    <input name=\"username\" placeholder=\"username\" onChange={onChange} />\r\n                    <input\r\n                        name=\"password\"\r\n                        type=\"password\"\r\n                        placeholder=\"password\"\r\n                        onChange={onChange}\r\n                    />\r\n                    <input name=\"email\" placeholder=\"email\" onChange={onChange} />\r\n                    <button onClick={signUp}>Sign Up</button>\r\n                </div>\r\n            )}\r\n            {formType === 'signIn' && (\r\n                <div>\r\n                    <input name=\"username\" placeholder=\"username\" onChange={onChange} />\r\n                    <input\r\n                        type=\"password\"\r\n                        type=\"password\"\r\n                        placeholder=\"password\"\r\n                        onChange={onChange}\r\n                    />\r\n                    <button onClick={signIn}>Sign In</button>\r\n                </div>\r\n            )}\r\n            {formType === 'confirmSignUp' && (\r\n                <div>\r\n                    <input name=\"authCode\" placeholder=\"Confirmation code\" onChange={onChange} />\r\n                    <button onClick={confirmSignUp}>Confirm sign up</button>\r\n                </div>\r\n            )}\r\n\r\n            {formType === 'signedIn' && <div>You've signed in successfully</div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Profile\r\n"]},"metadata":{},"sourceType":"module"}