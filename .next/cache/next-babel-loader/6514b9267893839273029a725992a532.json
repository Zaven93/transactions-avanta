{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport { useQuery } from \"@apollo/client\";\nimport { Modal } from \"@shopify/polaris\";\nimport { Table } from \"semantic-ui-react\";\nimport config from \"../aws-exports\";\nimport BranchRow from \"./BranchRow\";\nimport { listProducts, getBranchById } from \"../graphql/queries\";\nimport { createBranchProduct, productUpdate, updateBranchProduct, deleteBranchProduct } from \"../graphql/mutation\";\nimport { onCreateBranchProduct, onUpdateBranchProduct, onDeleteBranchProduct } from \"../graphql/subscriptions\";\nAPI.configure(config);\n\nvar ProductsList = function ProductsList(_ref) {\n  _s();\n\n  var active = _ref.active,\n      handleChange = _ref.handleChange,\n      branchId = _ref.branchId;\n\n  var _useQuery = useQuery(listProducts),\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      data = _useQuery.data;\n\n  var _useState = useState(\"\"),\n      branchProductSubscription = _useState[0],\n      setBranchProductSubscription = _useState[1];\n\n  var _useState2 = useState([]),\n      rowId = _useState2[0],\n      setRowId = _useState2[1];\n\n  var _useState3 = useState({\n    products: []\n  }),\n      state = _useState3[0],\n      setState = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      branchInfo = _useState4[0],\n      setBranchInfo = _useState4[1];\n\n  var getBranch = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var branch;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return API.graphql(graphqlOperation(getBranchById, {\n                id: branchId\n              }));\n\n            case 3:\n              branch = _context.sent;\n              setBranchInfo(branch.data.getBranch);\n              setRowId(_toConsumableArray(branch.data.getBranch.branchProducts.items.map(function (item) {\n                return item.productId;\n              })));\n              setState({\n                products: [].concat(_toConsumableArray(state.products), _toConsumableArray(branch.data.getBranch.branchProducts.items.map(function (product) {\n                  return {\n                    id: product.productId\n                  };\n                })))\n              });\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9]]);\n    }));\n\n    return function getBranch() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getBranch();\n    var createListener = API.graphql(graphqlOperation(onCreateBranchProduct)).subscribe({\n      next: function next(createdBranchProduct) {\n        return setBranchProductSubscription(createdBranchProduct);\n      }\n    });\n    var updateListener = API.graphql(graphqlOperation(onUpdateBranchProduct)).subscribe({\n      next: function next(updatedBranchProduct) {\n        return setBranchProductSubscription(updatedBranchProduct);\n      }\n    });\n    var deleteListener = API.graphql(graphqlOperation(onDeleteBranchProduct)).subscribe({\n      next: function next(deletedBranchProduct) {\n        return setBranchProductSubscription(deletedBranchProduct);\n      }\n    });\n    return function () {\n      createListener.unsubscribe();\n      updateListener.unsubscribe();\n      deleteListener.unsubscribe();\n    };\n  }, [branchId, branchProductSubscription]);\n\n  if (loading) {\n    return __jsx(\"div\", null, \"Loading products...\");\n  }\n\n  if (error) {\n    return __jsx(\"div\", null, \"Some error occured\");\n  }\n\n  var deleteProductsFromBranch = function deleteProductsFromBranch() {\n    var productsToDeleteFromBranch = branchInfo.branchProducts.items.filter(function (branchProduct) {\n      return !state.products.map(function (product) {\n        return product.id;\n      }).includes(branchProduct.productId);\n    });\n    Promise.all(productsToDeleteFromBranch.map(function (deleteProduct) {\n      API.graphql(graphqlOperation(deleteBranchProduct, {\n        input: {\n          id: deleteProduct.id\n        }\n      }));\n    }))[\"catch\"](function (err) {\n      return console.log(err);\n    });\n    return;\n  };\n\n  var addProductsToBranch = function addProductsToBranch() {\n    Promise.all(state.products.map(function (product) {\n      var updatedProduct = branchInfo.branchProducts.items.filter(function (branchProduct) {\n        return branchProduct.productId === product.id;\n      })[0];\n\n      if (updatedProduct) {\n        API.graphql(graphqlOperation(updateBranchProduct, {\n          input: {\n            id: updatedProduct.id,\n            tags: product.tags\n          }\n        }));\n      } else {\n        API.graphql(graphqlOperation(createBranchProduct, {\n          input: {\n            id: uuidv4(),\n            branchId: branchId,\n            productId: product.id,\n            tags: product.tags\n          }\n        }));\n      }\n    }))[\"catch\"](function (err) {\n      return console.log(err);\n    });\n    return;\n  };\n\n  console.log(\"Row Id\", rowId);\n  console.log(\"Type of row Id\", typeof rowId);\n  return __jsx(Modal, {\n    open: active,\n    onClose: function onClose() {\n      return handleChange();\n    },\n    title: \"Choose products\",\n    primaryAction: {\n      content: \"Save changes\",\n      onAction: function onAction() {\n        addProductsToBranch();\n        deleteProductsFromBranch();\n        handleChange();\n      }\n    }\n  }, __jsx(Modal.Section, null, __jsx(Table, {\n    celled: true,\n    striped: true,\n    selectable: true\n  }, __jsx(Table.Header, null, __jsx(Table.Row, null, __jsx(Table.HeaderCell, null, \"Products\"), __jsx(Table.HeaderCell, {\n    textAlign: \"center\"\n  }, \"Price\"), __jsx(Table.HeaderCell, null, \"Bonus Percentage\"))), __jsx(Table.Body, null, data && branchInfo && data.products.edges.map(function (product) {\n    return __jsx(BranchRow, {\n      rowId: rowId,\n      setRowId: setRowId,\n      branchInfo: branchInfo,\n      branchId: branchId,\n      product: product,\n      state: state,\n      setState: setState\n    });\n  })), __jsx(Table.Footer, {\n    fullWidth: true\n  }, __jsx(Table.Row, null)))));\n};\n\n_s(ProductsList, \"x2cmyMrch9QxuRhWvthVBlbL7mg=\", false, function () {\n  return [useQuery];\n});\n\n_c = ProductsList;\nexport default ProductsList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductsList\");","map":{"version":3,"sources":["/var/www/transactions-avanta/components/BranchProducts.js"],"names":["React","useState","useCallback","useEffect","v4","uuidv4","API","graphqlOperation","useQuery","Modal","Table","config","BranchRow","listProducts","getBranchById","createBranchProduct","productUpdate","updateBranchProduct","deleteBranchProduct","onCreateBranchProduct","onUpdateBranchProduct","onDeleteBranchProduct","configure","ProductsList","active","handleChange","branchId","loading","error","data","branchProductSubscription","setBranchProductSubscription","rowId","setRowId","products","state","setState","branchInfo","setBranchInfo","getBranch","graphql","id","branch","branchProducts","items","map","item","productId","product","console","log","createListener","subscribe","next","createdBranchProduct","updateListener","updatedBranchProduct","deleteListener","deletedBranchProduct","unsubscribe","deleteProductsFromBranch","productsToDeleteFromBranch","filter","branchProduct","includes","Promise","all","deleteProduct","input","err","addProductsToBranch","updatedProduct","tags","content","onAction","edges"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,SAASC,GAAT,EAAcC,gBAAd,QAAsC,aAAtC;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,KAAT,QAAsB,mBAAtB;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,YAAT,EAAuBC,aAAvB,QAA4C,oBAA5C;AACA,SACEC,mBADF,EAEEC,aAFF,EAGEC,mBAHF,EAIEC,mBAJF,QAKO,qBALP;AAMA,SACEC,qBADF,EAEEC,qBAFF,EAGEC,qBAHF,QAIO,0BAJP;AAMAf,GAAG,CAACgB,SAAJ,CAAcX,MAAd;;AAEA,IAAMY,YAAY,GAAG,SAAfA,YAAe,OAAwC;AAAA;;AAAA,MAArCC,MAAqC,QAArCA,MAAqC;AAAA,MAA7BC,YAA6B,QAA7BA,YAA6B;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAAA,kBAC1BlB,QAAQ,CAACK,YAAD,CADkB;AAAA,MACnDc,OADmD,aACnDA,OADmD;AAAA,MAC1CC,KAD0C,aAC1CA,KAD0C;AAAA,MACnCC,IADmC,aACnCA,IADmC;;AAAA,kBAEO5B,QAAQ,CAAC,EAAD,CAFf;AAAA,MAEpD6B,yBAFoD;AAAA,MAEzBC,4BAFyB;;AAAA,mBAGjC9B,QAAQ,CAAC,EAAD,CAHyB;AAAA,MAGpD+B,KAHoD;AAAA,MAG7CC,QAH6C;;AAAA,mBAIjChC,QAAQ,CAAC;AACjCiC,IAAAA,QAAQ,EAAE;AADuB,GAAD,CAJyB;AAAA,MAIpDC,KAJoD;AAAA,MAI7CC,QAJ6C;;AAAA,mBAOvBnC,QAAQ,CAAC,EAAD,CAPe;AAAA,MAOpDoC,UAPoD;AAAA,MAOxCC,aAPwC;;AAS3D,MAAMC,SAAS;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEOjC,GAAG,CAACkC,OAAJ,CAAYjC,gBAAgB,CAACO,aAAD,EAAgB;AAAE2B,gBAAAA,EAAE,EAAEf;AAAN,eAAhB,CAA5B,CAFP;;AAAA;AAERgB,cAAAA,MAFQ;AAGdJ,cAAAA,aAAa,CAACI,MAAM,CAACb,IAAP,CAAYU,SAAb,CAAb;AACAN,cAAAA,QAAQ,oBAEHS,MAAM,CAACb,IAAP,CAAYU,SAAZ,CAAsBI,cAAtB,CAAqCC,KAArC,CAA2CC,GAA3C,CAA+C,UAACC,IAAD;AAAA,uBAAUA,IAAI,CAACC,SAAf;AAAA,eAA/C,CAFG,EAAR;AAIAX,cAAAA,QAAQ,CAAC;AACPF,gBAAAA,QAAQ,+BACHC,KAAK,CAACD,QADH,sBAEHQ,MAAM,CAACb,IAAP,CAAYU,SAAZ,CAAsBI,cAAtB,CAAqCC,KAArC,CAA2CC,GAA3C,CAA+C,UAACG,OAAD;AAAA,yBAAc;AAC9DP,oBAAAA,EAAE,EAAEO,OAAO,CAACD;AADkD,mBAAd;AAAA,iBAA/C,CAFG;AADD,eAAD,CAAR;AARc;AAAA;;AAAA;AAAA;AAAA;AAiBdE,cAAAA,OAAO,CAACC,GAAR;;AAjBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAATX,SAAS;AAAA;AAAA;AAAA,KAAf;;AAqBApC,EAAAA,SAAS,CAAC,YAAM;AACdoC,IAAAA,SAAS;AAET,QAAMY,cAAc,GAAG7C,GAAG,CAACkC,OAAJ,CAAYjC,gBAAgB,CAACY,qBAAD,CAA5B,EAAqDiC,SAArD,CAA+D;AACpFC,MAAAA,IAAI,EAAE,cAACC,oBAAD;AAAA,eAA0BvB,4BAA4B,CAACuB,oBAAD,CAAtD;AAAA;AAD8E,KAA/D,CAAvB;AAGA,QAAMC,cAAc,GAAGjD,GAAG,CAACkC,OAAJ,CAAYjC,gBAAgB,CAACa,qBAAD,CAA5B,EAAqDgC,SAArD,CAA+D;AACpFC,MAAAA,IAAI,EAAE,cAACG,oBAAD;AAAA,eAA0BzB,4BAA4B,CAACyB,oBAAD,CAAtD;AAAA;AAD8E,KAA/D,CAAvB;AAGA,QAAMC,cAAc,GAAGnD,GAAG,CAACkC,OAAJ,CAAYjC,gBAAgB,CAACc,qBAAD,CAA5B,EAAqD+B,SAArD,CAA+D;AACpFC,MAAAA,IAAI,EAAE,cAACK,oBAAD;AAAA,eAA0B3B,4BAA4B,CAAC2B,oBAAD,CAAtD;AAAA;AAD8E,KAA/D,CAAvB;AAIA,WAAO,YAAM;AACXP,MAAAA,cAAc,CAACQ,WAAf;AACAJ,MAAAA,cAAc,CAACI,WAAf;AACAF,MAAAA,cAAc,CAACE,WAAf;AACD,KAJD;AAKD,GAlBQ,EAkBN,CAACjC,QAAD,EAAWI,yBAAX,CAlBM,CAAT;;AAoBA,MAAIH,OAAJ,EAAa;AACX,WAAO,yCAAP;AACD;;AAED,MAAIC,KAAJ,EAAW;AACT,WAAO,wCAAP;AACD;;AAED,MAAMgC,wBAAwB,GAAG,SAA3BA,wBAA2B,GAAM;AACrC,QAAMC,0BAA0B,GAAGxB,UAAU,CAACM,cAAX,CAA0BC,KAA1B,CAAgCkB,MAAhC,CACjC,UAACC,aAAD;AAAA,aACE,CAAC5B,KAAK,CAACD,QAAN,CAAeW,GAAf,CAAmB,UAACG,OAAD;AAAA,eAAaA,OAAO,CAACP,EAArB;AAAA,OAAnB,EAA4CuB,QAA5C,CAAqDD,aAAa,CAAChB,SAAnE,CADH;AAAA,KADiC,CAAnC;AAKAkB,IAAAA,OAAO,CAACC,GAAR,CACEL,0BAA0B,CAAChB,GAA3B,CAA+B,UAACsB,aAAD,EAAmB;AAChD7D,MAAAA,GAAG,CAACkC,OAAJ,CAAYjC,gBAAgB,CAACW,mBAAD,EAAsB;AAAEkD,QAAAA,KAAK,EAAE;AAAE3B,UAAAA,EAAE,EAAE0B,aAAa,CAAC1B;AAApB;AAAT,OAAtB,CAA5B;AACD,KAFD,CADF,WAIQ,UAAC4B,GAAD;AAAA,aAASpB,OAAO,CAACC,GAAR,CAAYmB,GAAZ,CAAT;AAAA,KAJR;AAMA;AACD,GAbD;;AAeA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAChCL,IAAAA,OAAO,CAACC,GAAR,CACE/B,KAAK,CAACD,QAAN,CAAeW,GAAf,CAAmB,UAACG,OAAD,EAAa;AAC9B,UAAMuB,cAAc,GAAGlC,UAAU,CAACM,cAAX,CAA0BC,KAA1B,CAAgCkB,MAAhC,CACrB,UAACC,aAAD;AAAA,eAAmBA,aAAa,CAAChB,SAAd,KAA4BC,OAAO,CAACP,EAAvD;AAAA,OADqB,EAErB,CAFqB,CAAvB;;AAGA,UAAI8B,cAAJ,EAAoB;AAClBjE,QAAAA,GAAG,CAACkC,OAAJ,CACEjC,gBAAgB,CAACU,mBAAD,EAAsB;AACpCmD,UAAAA,KAAK,EAAE;AACL3B,YAAAA,EAAE,EAAE8B,cAAc,CAAC9B,EADd;AAEL+B,YAAAA,IAAI,EAAExB,OAAO,CAACwB;AAFT;AAD6B,SAAtB,CADlB;AAQD,OATD,MASO;AACLlE,QAAAA,GAAG,CAACkC,OAAJ,CACEjC,gBAAgB,CAACQ,mBAAD,EAAsB;AACpCqD,UAAAA,KAAK,EAAE;AACL3B,YAAAA,EAAE,EAAEpC,MAAM,EADL;AAELqB,YAAAA,QAAQ,EAAEA,QAFL;AAGLqB,YAAAA,SAAS,EAAEC,OAAO,CAACP,EAHd;AAIL+B,YAAAA,IAAI,EAAExB,OAAO,CAACwB;AAJT;AAD6B,SAAtB,CADlB;AAUD;AACF,KAzBD,CADF,WA2BQ,UAACH,GAAD;AAAA,aAASpB,OAAO,CAACC,GAAR,CAAYmB,GAAZ,CAAT;AAAA,KA3BR;AA6BA;AACD,GA/BD;;AAiCApB,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBlB,KAAtB;AACAiB,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8B,OAAOlB,KAArC;AAEA,SACE,MAAC,KAAD;AACE,IAAA,IAAI,EAAER,MADR;AAEE,IAAA,OAAO,EAAE;AAAA,aAAMC,YAAY,EAAlB;AAAA,KAFX;AAGE,IAAA,KAAK,EAAC,iBAHR;AAIE,IAAA,aAAa,EAAE;AACbgD,MAAAA,OAAO,EAAE,cADI;AAEbC,MAAAA,QAAQ,EAAE,oBAAM;AACdJ,QAAAA,mBAAmB;AACnBV,QAAAA,wBAAwB;AACxBnC,QAAAA,YAAY;AACb;AANY;AAJjB,KAYE,MAAC,KAAD,CAAO,OAAP,QACE,MAAC,KAAD;AAAO,IAAA,MAAM,MAAb;AAAc,IAAA,OAAO,MAArB;AAAsB,IAAA,UAAU;AAAhC,KACE,MAAC,KAAD,CAAO,MAAP,QACE,MAAC,KAAD,CAAO,GAAP,QACE,MAAC,KAAD,CAAO,UAAP,mBADF,EAEE,MAAC,KAAD,CAAO,UAAP;AAAkB,IAAA,SAAS,EAAC;AAA5B,aAFF,EAGE,MAAC,KAAD,CAAO,UAAP,2BAHF,CADF,CADF,EAQE,MAAC,KAAD,CAAO,IAAP,QACGI,IAAI,IACHQ,UADD,IAECR,IAAI,CAACK,QAAL,CAAcyC,KAAd,CAAoB9B,GAApB,CAAwB,UAACG,OAAD;AAAA,WACtB,MAAC,SAAD;AACE,MAAA,KAAK,EAAEhB,KADT;AAEE,MAAA,QAAQ,EAAEC,QAFZ;AAGE,MAAA,UAAU,EAAEI,UAHd;AAIE,MAAA,QAAQ,EAAEX,QAJZ;AAKE,MAAA,OAAO,EAAEsB,OALX;AAME,MAAA,KAAK,EAAEb,KANT;AAOE,MAAA,QAAQ,EAAEC;AAPZ,MADsB;AAAA,GAAxB,CAHJ,CARF,EAuBE,MAAC,KAAD,CAAO,MAAP;AAAc,IAAA,SAAS;AAAvB,KACE,MAAC,KAAD,CAAO,GAAP,OADF,CAvBF,CADF,CAZF,CADF;AA4CD,CAzJD;;GAAMb,Y;UAC6Bf,Q;;;KAD7Be,Y;AA2JN,eAAeA,YAAf","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\"\nimport { v4 as uuidv4 } from \"uuid\"\nimport { API, graphqlOperation } from \"aws-amplify\"\nimport { useQuery } from \"@apollo/client\"\nimport { Modal } from \"@shopify/polaris\"\nimport { Table } from \"semantic-ui-react\"\nimport config from \"../aws-exports\"\nimport BranchRow from \"./BranchRow\"\nimport { listProducts, getBranchById } from \"../graphql/queries\"\nimport {\n  createBranchProduct,\n  productUpdate,\n  updateBranchProduct,\n  deleteBranchProduct,\n} from \"../graphql/mutation\"\nimport {\n  onCreateBranchProduct,\n  onUpdateBranchProduct,\n  onDeleteBranchProduct,\n} from \"../graphql/subscriptions\"\n\nAPI.configure(config)\n\nconst ProductsList = ({ active, handleChange, branchId }) => {\n  const { loading, error, data } = useQuery(listProducts)\n  const [branchProductSubscription, setBranchProductSubscription] = useState(\"\")\n  const [rowId, setRowId] = useState([])\n  const [state, setState] = useState({\n    products: [],\n  })\n  const [branchInfo, setBranchInfo] = useState(\"\")\n\n  const getBranch = async () => {\n    try {\n      const branch = await API.graphql(graphqlOperation(getBranchById, { id: branchId }))\n      setBranchInfo(branch.data.getBranch)\n      setRowId([\n        // ...rowId,\n        ...branch.data.getBranch.branchProducts.items.map((item) => item.productId),\n      ])\n      setState({\n        products: [\n          ...state.products,\n          ...branch.data.getBranch.branchProducts.items.map((product) => ({\n            id: product.productId,\n          })),\n        ],\n      })\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  useEffect(() => {\n    getBranch()\n\n    const createListener = API.graphql(graphqlOperation(onCreateBranchProduct)).subscribe({\n      next: (createdBranchProduct) => setBranchProductSubscription(createdBranchProduct),\n    })\n    const updateListener = API.graphql(graphqlOperation(onUpdateBranchProduct)).subscribe({\n      next: (updatedBranchProduct) => setBranchProductSubscription(updatedBranchProduct),\n    })\n    const deleteListener = API.graphql(graphqlOperation(onDeleteBranchProduct)).subscribe({\n      next: (deletedBranchProduct) => setBranchProductSubscription(deletedBranchProduct),\n    })\n\n    return () => {\n      createListener.unsubscribe()\n      updateListener.unsubscribe()\n      deleteListener.unsubscribe()\n    }\n  }, [branchId, branchProductSubscription])\n\n  if (loading) {\n    return <div>Loading products...</div>\n  }\n\n  if (error) {\n    return <div>Some error occured</div>\n  }\n\n  const deleteProductsFromBranch = () => {\n    const productsToDeleteFromBranch = branchInfo.branchProducts.items.filter(\n      (branchProduct) =>\n        !state.products.map((product) => product.id).includes(branchProduct.productId)\n    )\n\n    Promise.all(\n      productsToDeleteFromBranch.map((deleteProduct) => {\n        API.graphql(graphqlOperation(deleteBranchProduct, { input: { id: deleteProduct.id } }))\n      })\n    ).catch((err) => console.log(err))\n\n    return\n  }\n\n  const addProductsToBranch = () => {\n    Promise.all(\n      state.products.map((product) => {\n        const updatedProduct = branchInfo.branchProducts.items.filter(\n          (branchProduct) => branchProduct.productId === product.id\n        )[0]\n        if (updatedProduct) {\n          API.graphql(\n            graphqlOperation(updateBranchProduct, {\n              input: {\n                id: updatedProduct.id,\n                tags: product.tags,\n              },\n            })\n          )\n        } else {\n          API.graphql(\n            graphqlOperation(createBranchProduct, {\n              input: {\n                id: uuidv4(),\n                branchId: branchId,\n                productId: product.id,\n                tags: product.tags,\n              },\n            })\n          )\n        }\n      })\n    ).catch((err) => console.log(err))\n\n    return\n  }\n\n  console.log(\"Row Id\", rowId)\n  console.log(\"Type of row Id\", typeof rowId)\n\n  return (\n    <Modal\n      open={active}\n      onClose={() => handleChange()}\n      title=\"Choose products\"\n      primaryAction={{\n        content: \"Save changes\",\n        onAction: () => {\n          addProductsToBranch()\n          deleteProductsFromBranch()\n          handleChange()\n        },\n      }}>\n      <Modal.Section>\n        <Table celled striped selectable>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell>Products</Table.HeaderCell>\n              <Table.HeaderCell textAlign=\"center\">Price</Table.HeaderCell>\n              <Table.HeaderCell>Bonus Percentage</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {data &&\n              branchInfo &&\n              data.products.edges.map((product) => (\n                <BranchRow\n                  rowId={rowId}\n                  setRowId={setRowId}\n                  branchInfo={branchInfo}\n                  branchId={branchId}\n                  product={product}\n                  state={state}\n                  setState={setState}\n                />\n              ))}\n          </Table.Body>\n          <Table.Footer fullWidth>\n            <Table.Row></Table.Row>\n          </Table.Footer>\n        </Table>\n      </Modal.Section>\n    </Modal>\n  )\n}\n\nexport default ProductsList\n"]},"metadata":{},"sourceType":"module"}