{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\";\nimport { useQuery } from \"@apollo/client\";\nimport { Modal, Thumbnail, Checkbox, TextStyle } from \"@shopify/polaris\";\nimport { Table, Header } from \"semantic-ui-react\";\nimport { useUpdatePaymentRequest } from \"../core/hooks\";\nimport { toCurrency } from \"../utils/helper\";\nimport { listProducts } from \"../graphql/queries\";\nimport { updatePaymentRequest } from \"../graphql/mutation\";\n\nconst ProductsList = ({\n  active,\n  handleChange,\n  paymentRequestId\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(listProducts);\n  const {\n    0: rowId,\n    1: setRowId\n  } = useState([]);\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    products: []\n  });\n  const {\n    updatePaymentRequest\n  } = useUpdatePaymentRequest();\n\n  if (loading) {\n    return __jsx(\"div\", null, \"Loading products...\");\n  }\n\n  if (error) {\n    return __jsx(\"div\", null, \"Some error occured\");\n  }\n\n  const acceptPayment = () => {\n    console.log(\"Accepted payment\");\n    return updatePaymentRequest({\n      paymentId: paymentRequestId,\n      status: \"APPROVED\",\n      products: state.products.map(product => ({\n        originalUnitPrice: product.node.variants.edges[0].node.price,\n        quantity: 1,\n        variantId: product.node.variants.edges[0].node.id\n      }))\n    });\n  };\n\n  return __jsx(Modal, {\n    open: active,\n    onClose: handleChange,\n    title: \"Choose products\",\n    primaryAction: {\n      content: \"Proceed\",\n      onAction: () => {\n        acceptPayment();\n        handleChange();\n      }\n    }\n  }, __jsx(Modal.Section, null, __jsx(Table, {\n    celled: true,\n    striped: true,\n    selectable: true\n  }, __jsx(Table.Header, null, __jsx(Table.Row, null, __jsx(Table.HeaderCell, null, \"Products\"), __jsx(Table.HeaderCell, null, \"Description\"), __jsx(Table.HeaderCell, {\n    textAlign: \"center\"\n  }, \"Price\"))), __jsx(Table.Body, null, data && data.products.edges.map(product => __jsx(Table.Row, {\n    key: product.node.id,\n    onClick: () => {\n      if (rowId.includes(product.node.id)) {\n        setRowId(rowId.filter(id => id !== product.node.id));\n        setState({\n          products: state.products.filter(filteredProduct => filteredProduct.node.id !== product.node.id)\n        });\n      } else {\n        setRowId([...rowId, product.node.id]);\n        setState(_objectSpread(_objectSpread({}, state), {}, {\n          products: [...state.products, product]\n        }));\n      }\n    }\n  }, __jsx(Table.Cell, null, __jsx(Header, {\n    as: \"h4\",\n    image: true,\n    className: \"product-header\"\n  }, __jsx(Checkbox, {\n    checked: rowId.includes(product.node.id) && true\n  }), __jsx(Thumbnail, {\n    source: product.node.images.edges[0] && product.node.images.edges[0].node.originalSrc,\n    size: \"small\",\n    alt: \"\"\n  }), __jsx(Header.Content, null, product.node.title))), __jsx(Table.Cell, null, __jsx(TextStyle, {\n    variation: \"subdued\"\n  }, product.node.description)), __jsx(Table.Cell, {\n    textAlign: \"center\"\n  }, __jsx(TextStyle, {\n    variation: \"subdued\"\n  }, product.node.variants.edges[0] && toCurrency(product.node.variants.edges[0].node.price)))))), __jsx(Table.Footer, {\n    fullWidth: true\n  }, __jsx(Table.Row, null)))));\n};\n\nexport default ProductsList;","map":{"version":3,"sources":["/var/www/transactions-avanta/components/ProductsList.js"],"names":["React","useState","useQuery","Modal","Thumbnail","Checkbox","TextStyle","Table","Header","useUpdatePaymentRequest","toCurrency","listProducts","updatePaymentRequest","ProductsList","active","handleChange","paymentRequestId","loading","error","data","rowId","setRowId","state","setState","products","acceptPayment","console","log","paymentId","status","map","product","originalUnitPrice","node","variants","edges","price","quantity","variantId","id","content","onAction","includes","filter","filteredProduct","images","originalSrc","title","description"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\"\nimport { useQuery } from \"@apollo/client\"\nimport { Modal, Thumbnail, Checkbox, TextStyle } from \"@shopify/polaris\"\nimport { Table, Header } from \"semantic-ui-react\"\nimport { useUpdatePaymentRequest } from \"../core/hooks\"\nimport { toCurrency } from \"../utils/helper\"\nimport { listProducts } from \"../graphql/queries\"\nimport { updatePaymentRequest } from \"../graphql/mutation\"\n\nconst ProductsList = ({ active, handleChange, paymentRequestId }) => {\n  const { loading, error, data } = useQuery(listProducts)\n  const [rowId, setRowId] = useState([])\n  const [state, setState] = useState({\n    products: [],\n  })\n\n  const { updatePaymentRequest } = useUpdatePaymentRequest()\n\n  if (loading) {\n    return <div>Loading products...</div>\n  }\n\n  if (error) {\n    return <div>Some error occured</div>\n  }\n\n  const acceptPayment = () => {\n    console.log(\"Accepted payment\")\n    return updatePaymentRequest({\n      paymentId: paymentRequestId,\n      status: \"APPROVED\",\n      products: state.products.map((product) => ({\n        originalUnitPrice: product.node.variants.edges[0].node.price,\n        quantity: 1,\n        variantId: product.node.variants.edges[0].node.id,\n      })),\n    })\n  }\n\n  return (\n    <Modal\n      open={active}\n      onClose={handleChange}\n      title=\"Choose products\"\n      primaryAction={{\n        content: \"Proceed\",\n        onAction: () => {\n          acceptPayment()\n          handleChange()\n        },\n      }}>\n      <Modal.Section>\n        <Table celled striped selectable>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell>Products</Table.HeaderCell>\n              <Table.HeaderCell>Description</Table.HeaderCell>\n              <Table.HeaderCell textAlign=\"center\">Price</Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          <Table.Body>\n            {data &&\n              data.products.edges.map((product) => (\n                <Table.Row\n                  key={product.node.id}\n                  onClick={() => {\n                    if (rowId.includes(product.node.id)) {\n                      setRowId(rowId.filter((id) => id !== product.node.id))\n                      setState({\n                        products: state.products.filter(\n                          (filteredProduct) => filteredProduct.node.id !== product.node.id\n                        ),\n                      })\n                    } else {\n                      setRowId([...rowId, product.node.id])\n                      setState({\n                        ...state,\n                        products: [...state.products, product],\n                      })\n                    }\n                  }}>\n                  <Table.Cell>\n                    <Header as=\"h4\" image className=\"product-header\">\n                      <Checkbox checked={rowId.includes(product.node.id) && true} />\n                      <Thumbnail\n                        source={\n                          product.node.images.edges[0] &&\n                          product.node.images.edges[0].node.originalSrc\n                        }\n                        size=\"small\"\n                        alt=\"\"\n                      />\n                      <Header.Content>{product.node.title}</Header.Content>\n                    </Header>\n                  </Table.Cell>\n                  <Table.Cell>\n                    <TextStyle variation=\"subdued\">{product.node.description}</TextStyle>\n                  </Table.Cell>\n                  <Table.Cell textAlign=\"center\">\n                    <TextStyle variation=\"subdued\">\n                      {product.node.variants.edges[0] &&\n                        toCurrency(product.node.variants.edges[0].node.price)}\n                    </TextStyle>\n                  </Table.Cell>\n                </Table.Row>\n              ))}\n          </Table.Body>\n          <Table.Footer fullWidth>\n            <Table.Row></Table.Row>\n          </Table.Footer>\n        </Table>\n      </Modal.Section>\n    </Modal>\n  )\n}\n\nexport default ProductsList\n"]},"metadata":{},"sourceType":"module"}