{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useCallback, useEffect, useRef } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { Card, Button } from \"@shopify/polaris\";\nimport { Icon, Dimmer, Loader } from \"semantic-ui-react\";\nimport { useMutation } from \"react-query\";\nimport { AuthService } from \"../core/services\";\nimport { useLogin } from \"../core/hooks\";\n\nvar Login = function Login(_ref) {\n  _s();\n\n  var setUser = _ref.setUser;\n\n  var _useState = useState(\"\"),\n      password = _useState[0],\n      setPassword = _useState[1];\n\n  var _useState2 = useState(false),\n      activeUsername = _useState2[0],\n      setActiveUsername = _useState2[1];\n\n  var _useState3 = useState(false),\n      activePassword = _useState3[0],\n      setActivePassword = _useState3[1];\n\n  var _useState4 = useState(false),\n      showPassword = _useState4[0],\n      setShowPassword = _useState4[1];\n\n  var _useState5 = useState({\n    usernameError: \"\",\n    passwordError: \"\"\n  }),\n      loginErrorMessage = _useState5[0],\n      setLoginErrorMessage = _useState5[1];\n\n  var _useForm = useForm(),\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors,\n      register = _useForm.register;\n\n  var _useLogin = useLogin(),\n      login = _useLogin.login,\n      status = _useLogin.status,\n      data = _useLogin.data,\n      loginError = _useLogin.error;\n\n  useEffect(function () {\n    setUser(data);\n  }, [data]);\n  useEffect(function () {\n    if (!loginError) {\n      return;\n    }\n\n    if (loginError.code === \"UserNotFoundException\") {\n      return setLoginErrorMessage(_objectSpread(_objectSpread({}, loginErrorMessage), {}, {\n        username: \"User with such a username doesn't exist\"\n      }));\n    }\n\n    if (loginError.code === \"NotAuthorizedException\") {\n      return setLoginErrorMessage(_objectSpread(_objectSpread({}, loginErrorMessage), {}, {\n        password: \"Incorrect password\"\n      }));\n    }\n  }, [loginError]);\n  console.log(\"Login error Zaven jan\", loginError);\n  return __jsx(\"div\", {\n    className: \"authentication-container\"\n  }, __jsx(Card, {\n    title: \"Log into your branch\",\n    sectioned: true\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(login)\n  }, __jsx(\"div\", {\n    className: \"form-controll\"\n  }, __jsx(\"input\", {\n    name: \"username\",\n    ref: register({\n      required: \"Username is required!\"\n    }),\n    onChange: function onChange() {\n      return setLoginErrorMessage(\"\");\n    },\n    onBlur: function onBlur(e) {\n      if (e.target.value) {\n        return setActiveUsername(true);\n      }\n\n      return setActiveUsername(false);\n    }\n  }), __jsx(Icon, {\n    name: \"user\"\n  }), __jsx(\"label\", {\n    className: activeUsername ? \"active\" : \"\",\n    htmlFor: \"username\"\n  }, \"Username\"), loginErrorMessage.username && __jsx(\"p\", {\n    className: \"error-notification\"\n  }, loginErrorMessage.username), loginErrorMessage && errors.username && __jsx(\"p\", {\n    className: \"error-notification\"\n  }, errors.username.message)), __jsx(\"div\", {\n    className: \"form-controll\"\n  }, __jsx(\"input\", {\n    name: \"password\",\n    type: showPassword ? \"text\" : \"password\",\n    ref: register({\n      required: \"Password is required!\"\n    }),\n    onChange: function onChange(e) {\n      setPassword(e.target.value);\n      setLoginErrorMessage(_objectSpread(_objectSpread({}, loginErrorMessage), {}, {\n        password: \"\"\n      }));\n    },\n    onBlur: function onBlur(e) {\n      if (e.target.value) {\n        return setActivePassword(true);\n      }\n\n      return setActivePassword(false);\n    }\n  }), __jsx(Icon, {\n    name: \"lock\"\n  }), __jsx(\"label\", {\n    className: activePassword ? \"active\" : \"\",\n    htmlFor: \"password\"\n  }, \"Password\"), __jsx(Icon, {\n    className: password ? \"show-eye\" : \"not-show-eye\",\n    onClick: function onClick() {\n      return setShowPassword(!showPassword);\n    },\n    name: showPassword ? \"eye slash\" : \"eye\",\n    style: {\n      color: showPassword ? \"#6774c8\" : \"\"\n    }\n  }), loginErrorMessage.password && __jsx(\"p\", {\n    className: \"error-notification\"\n  }, loginErrorMessage.password), loginErrorMessage.password && errors.password && __jsx(\"p\", {\n    className: \"error-notification\"\n  }, errors.password.message)), __jsx(Button, {\n    primary: true,\n    submit: true\n  }, __jsx(Icon, {\n    name: \"sign-in\"\n  }), \" Login\"))));\n};\n\n_s(Login, \"E02imFFUV68HXkQPuKih3XwhVRI=\", false, function () {\n  return [useForm, useLogin];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/var/www/transactions-avanta/components/Login.js"],"names":["React","useState","useCallback","useEffect","useRef","useForm","Card","Button","Icon","Dimmer","Loader","useMutation","AuthService","useLogin","Login","setUser","password","setPassword","activeUsername","setActiveUsername","activePassword","setActivePassword","showPassword","setShowPassword","usernameError","passwordError","loginErrorMessage","setLoginErrorMessage","handleSubmit","errors","register","login","status","data","loginError","error","code","username","console","log","required","e","target","value","message","color"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from \"react\"\nimport { useForm } from \"react-hook-form\"\nimport { Card, Button } from \"@shopify/polaris\"\nimport { Icon, Dimmer, Loader } from \"semantic-ui-react\"\nimport { useMutation } from \"react-query\"\nimport { AuthService } from \"../core/services\"\nimport { useLogin } from \"../core/hooks\"\n\nconst Login = ({ setUser }) => {\n  const [password, setPassword] = useState(\"\")\n  const [activeUsername, setActiveUsername] = useState(false)\n  const [activePassword, setActivePassword] = useState(false)\n  const [showPassword, setShowPassword] = useState(false)\n  const [loginErrorMessage, setLoginErrorMessage] = useState({\n    usernameError: \"\",\n    passwordError: \"\",\n  })\n\n  const { handleSubmit, errors, register } = useForm()\n\n  const { login, status, data, error: loginError } = useLogin()\n\n  useEffect(() => {\n    setUser(data)\n  }, [data])\n\n  useEffect(() => {\n    if (!loginError) {\n      return\n    }\n    if (loginError.code === \"UserNotFoundException\") {\n      return setLoginErrorMessage({\n        ...loginErrorMessage,\n        username: \"User with such a username doesn't exist\",\n      })\n    }\n    if (loginError.code === \"NotAuthorizedException\") {\n      return setLoginErrorMessage({ ...loginErrorMessage, password: \"Incorrect password\" })\n    }\n  }, [loginError])\n\n  console.log(\"Login error Zaven jan\", loginError)\n\n  return (\n    <div className=\"authentication-container\">\n      <Card title=\"Log into your branch\" sectioned>\n        <form onSubmit={handleSubmit(login)}>\n          <div className=\"form-controll\">\n            <input\n              name=\"username\"\n              ref={register({ required: \"Username is required!\" })}\n              onChange={() => setLoginErrorMessage(\"\")}\n              onBlur={(e) => {\n                if (e.target.value) {\n                  return setActiveUsername(true)\n                }\n                return setActiveUsername(false)\n              }}\n            />\n            <Icon name=\"user\" />\n            <label className={activeUsername ? \"active\" : \"\"} htmlFor=\"username\">\n              Username\n            </label>\n            {loginErrorMessage.username && (\n              <p className=\"error-notification\">{loginErrorMessage.username}</p>\n            )}\n            {loginErrorMessage && errors.username && (\n              <p className=\"error-notification\">{errors.username.message}</p>\n            )}\n          </div>\n          <div className=\"form-controll\">\n            <input\n              name=\"password\"\n              type={showPassword ? \"text\" : \"password\"}\n              ref={register({ required: \"Password is required!\" })}\n              onChange={(e) => {\n                setPassword(e.target.value)\n                setLoginErrorMessage({ ...loginErrorMessage, password: \"\" })\n              }}\n              onBlur={(e) => {\n                if (e.target.value) {\n                  return setActivePassword(true)\n                }\n                return setActivePassword(false)\n              }}\n            />\n            <Icon name=\"lock\" />\n            <label className={activePassword ? \"active\" : \"\"} htmlFor=\"password\">\n              Password\n            </label>\n            <Icon\n              className={password ? \"show-eye\" : \"not-show-eye\"}\n              onClick={() => setShowPassword(!showPassword)}\n              name={showPassword ? \"eye slash\" : \"eye\"}\n              style={{ color: showPassword ? \"#6774c8\" : \"\" }}\n            />\n            {loginErrorMessage.password && (\n              <p className=\"error-notification\">{loginErrorMessage.password}</p>\n            )}\n            {loginErrorMessage.password && errors.password && (\n              <p className=\"error-notification\">{errors.password.message}</p>\n            )}\n          </div>\n          <Button primary submit>\n            <Icon name=\"sign-in\" /> Login\n          </Button>\n        </form>\n      </Card>\n    </div>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}