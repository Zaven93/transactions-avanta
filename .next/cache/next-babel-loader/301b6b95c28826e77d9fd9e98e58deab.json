{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useCallback } from \"react\";\nimport { Card, Button, TextField, Form, FormLayout } from \"@shopify/polaris\";\nimport Amplify, { Auth } from \"aws-amplify\";\nimport config from \"../aws-exports\";\nAmplify.configure(config);\n\nvar Profile = function Profile(_ref) {\n  _s();\n\n  var setUser = _ref.setUser;\n\n  var _useState = useState(\"\"),\n      username = _useState[0],\n      setUsername = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      email = _useState3[0],\n      setEmail = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      code = _useState4[0],\n      setCode = _useState4[1];\n\n  var _useState5 = useState(\"signUp\"),\n      formType = _useState5[0],\n      setFormType = _useState5[1];\n\n  var onChangeUsername = useCallback(function (newValue) {\n    setUsername(newValue);\n  }, []);\n  var onChangePassword = useCallback(function (newValue) {\n    setPassword(newValue);\n  }, []);\n  var onChangeEmail = useCallback(function (newValue) {\n    setEmail(newValue);\n  });\n  var onChangeCode = useCallback(function (newValue) {\n    setCode(newValue);\n  });\n\n  function signUp(_x) {\n    return _signUp.apply(this, arguments);\n  }\n\n  function _signUp() {\n    _signUp = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var _yield$Auth$signUp, user;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.prev = 1;\n              _context2.next = 4;\n              return Auth.signUp({\n                username: username,\n                password: password,\n                attributes: {\n                  email: email\n                }\n              });\n\n            case 4:\n              _yield$Auth$signUp = _context2.sent;\n              user = _yield$Auth$signUp.user;\n              console.log(\"User Zaven jan\", user);\n              setFormType(\"confirm\");\n              _context2.next = 13;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.log(\"error signing up:\", _context2.t0);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 10]]);\n    }));\n    return _signUp.apply(this, arguments);\n  }\n\n  function confirm(_x2) {\n    return _confirm.apply(this, arguments);\n  }\n\n  function _confirm() {\n    _confirm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault();\n              _context3.prev = 1;\n              _context3.next = 4;\n              return Auth.confirmSignUp(username, code);\n\n            case 4:\n              setFormType(\"signIn\");\n              _context3.next = 10;\n              break;\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.log(\"error confirming sign up\", _context3.t0);\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 7]]);\n    }));\n    return _confirm.apply(this, arguments);\n  }\n\n  var signIn = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var signedInUser;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return Auth.signIn(username, password);\n\n            case 3:\n              signedInUser = _context.sent;\n              setUser(signedInUser);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function signIn(_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"authentication-container\"\n  }, __jsx(Card, {\n    title: \"Log into your branch\",\n    sectioned: true\n  }, formType === \"signUp\" && __jsx(Form, {\n    onSubmit: signUp\n  }, __jsx(FormLayout, null, __jsx(TextField, {\n    value: username,\n    onChange: onChangeUsername,\n    label: \"Username\"\n  }), __jsx(TextField, {\n    value: email,\n    onChange: onChangeEmail,\n    labe: \"Email\"\n  }), __jsx(TextField, {\n    type: \"password\",\n    value: password,\n    onChange: onChangePassword,\n    label: \"Password\"\n  }), __jsx(Button, {\n    primary: true,\n    submit: true\n  }, \"SignUp\"))), formType === \"confirm\" && __jsx(Form, {\n    onSubmit: confirm\n  }, __jsx(FormLayout, null, __jsx(TextField, {\n    value: username,\n    onChange: onChangeUsername,\n    label: \"Username\"\n  }), __jsx(TextField, {\n    value: code,\n    onChange: onChangeCode,\n    labe: \"Confirmation code\"\n  }), __jsx(Button, {\n    primary: true,\n    submit: true\n  }, \"Confirm code\"))), formType === \"signIn\" && __jsx(Form, {\n    onSubmit: signIn\n  }, __jsx(FormLayout, null, __jsx(TextField, {\n    value: username,\n    onChange: onChangeUsername,\n    label: \"Username\"\n  }), __jsx(TextField, {\n    type: \"password\",\n    value: password,\n    onChange: onChangePassword,\n    label: \"Password\"\n  }), __jsx(Button, {\n    primary: true,\n    submit: true\n  }, \"Login\")))));\n};\n\n_s(Profile, \"1yNJ56BbwpVvjn5z73JY98E+dAw=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/var/www/transactions-avanta/components/Login.js"],"names":["useState","useCallback","Card","Button","TextField","Form","FormLayout","Amplify","Auth","config","configure","Profile","setUser","username","setUsername","password","setPassword","email","setEmail","code","setCode","formType","setFormType","onChangeUsername","newValue","onChangePassword","onChangeEmail","onChangeCode","signUp","e","preventDefault","attributes","user","console","log","confirm","confirmSignUp","signIn","signedInUser"],"mappings":"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","sourcesContent":["import { useState, useCallback } from \"react\"\nimport { Card, Button, TextField, Form, FormLayout } from \"@shopify/polaris\"\nimport Amplify, { Auth } from \"aws-amplify\"\nimport config from \"../aws-exports\"\n\nAmplify.configure(config)\n\nconst Profile = ({ setUser }) => {\n  const [username, setUsername] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [email, setEmail] = useState(\"\")\n  const [code, setCode] = useState(\"\")\n  const [formType, setFormType] = useState(\"signUp\")\n\n  const onChangeUsername = useCallback((newValue) => {\n    setUsername(newValue)\n  }, [])\n\n  const onChangePassword = useCallback((newValue) => {\n    setPassword(newValue)\n  }, [])\n\n  const onChangeEmail = useCallback((newValue) => {\n    setEmail(newValue)\n  })\n\n  const onChangeCode = useCallback((newValue) => {\n    setCode(newValue)\n  })\n\n  async function signUp(e) {\n    e.preventDefault()\n    try {\n      const { user } = await Auth.signUp({\n        username,\n        password,\n        attributes: {\n          email,\n        },\n      })\n      console.log(\"User Zaven jan\", user)\n      setFormType(\"confirm\")\n    } catch (error) {\n      console.log(\"error signing up:\", error)\n    }\n  }\n\n  async function confirm(e) {\n    e.preventDefault()\n    try {\n      await Auth.confirmSignUp(username, code)\n      setFormType(\"signIn\")\n    } catch (error) {\n      console.log(\"error confirming sign up\", error)\n    }\n  }\n\n  const signIn = async (e) => {\n    e.preventDefault()\n    const signedInUser = await Auth.signIn(username, password)\n    setUser(signedInUser)\n  }\n\n  return (\n    <div className=\"authentication-container\">\n      <Card title=\"Log into your branch\" sectioned>\n        {formType === \"signUp\" && (\n          <Form onSubmit={signUp}>\n            <FormLayout>\n              <TextField value={username} onChange={onChangeUsername} label=\"Username\" />\n              <TextField value={email} onChange={onChangeEmail} labe=\"Email\" />\n              <TextField\n                type=\"password\"\n                value={password}\n                onChange={onChangePassword}\n                label=\"Password\"\n              />\n              <Button primary submit>\n                SignUp\n              </Button>\n            </FormLayout>\n          </Form>\n        )}\n        {formType === \"confirm\" && (\n          <Form onSubmit={confirm}>\n            <FormLayout>\n              <TextField value={username} onChange={onChangeUsername} label=\"Username\" />\n              <TextField value={code} onChange={onChangeCode} labe=\"Confirmation code\" />\n              <Button primary submit>\n                Confirm code\n              </Button>\n            </FormLayout>\n          </Form>\n        )}\n        {formType === \"signIn\" && (\n          <Form onSubmit={signIn}>\n            <FormLayout>\n              <TextField value={username} onChange={onChangeUsername} label=\"Username\" />\n              <TextField\n                type=\"password\"\n                value={password}\n                onChange={onChangePassword}\n                label=\"Password\"\n              />\n              <Button primary submit>\n                Login\n              </Button>\n            </FormLayout>\n          </Form>\n        )}\n      </Card>\n    </div>\n  )\n}\n\nexport default Profile\n"]},"metadata":{},"sourceType":"module"}