{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { Thumbnail, Checkbox, TextStyle, TextField } from \"@shopify/polaris\";\nimport { Table, Header, Icon } from \"semantic-ui-react\";\nimport { toCurrency } from \"../utils/helper\";\n\nconst BranchRow = ({\n  product,\n  state,\n  setState,\n  branchInfo,\n  rowId,\n  setRowId\n}) => {\n  const {\n    0: fetchedProduct,\n    1: setFetchedProduct\n  } = useState({\n    description: product.node.description,\n    id: product.node.id,\n    image: product.node.images.edges[0] ? product.node.images.edges[0].node.originalSrc : \"\",\n    tags: product.node.tags,\n    title: product.node.title,\n    variants: {\n      id: product.node.variants.edges[0].node.id,\n      price: product.node.variants.edges[0].node.price\n    }\n  });\n  const {\n    0: searchValue,\n    1: setSearchValue\n  } = useState(null);\n  const {\n    0: bonus,\n    1: setBonus\n  } = useState(\"\");\n  const handleSearchInput = useCallback(newValue => setSearchValue(newValue), []);\n  const handleBonus = useCallback(value => {\n    setBonus(value);\n    fetchedProduct.tags = [value];\n    setFetchedProduct(fetchedProduct);\n    setState(_objectSpread(_objectSpread({}, state.products.filter(product => product.id !== fetchedProduct.id)), {}, {\n      products: [...state.products, fetchedProduct]\n    }));\n  }, []);\n\n  const compareProduct = () => {\n    const comparedProduct = branchInfo.branchProducts.items.filter(branchProduct => branchProduct.productId === fetchedProduct.id);\n\n    if (!comparedProduct || comparedProduct === undefined) {\n      return;\n    }\n\n    setBonus(comparedProduct[0] ? comparedProduct[0].tags && comparedProduct[0].tags[0] : \"\");\n    return;\n  };\n\n  useEffect(() => {\n    console.log(\"Row id from useEffect\", branchInfo.branchProducts.items.map(item => item.productId).filter(productId => productId === fetchedProduct.id)[0]);\n    compareProduct();\n  }, [product, branchInfo]);\n  console.log(\"Fetched product\", fetchedProduct);\n  console.log(\"Product from branchRow\", product);\n  return __jsx(Table.Row, {\n    key: fetchedProduct.id\n  }, __jsx(Table.Cell, null, __jsx(Header, {\n    as: \"h4\",\n    image: true,\n    className: \"product-header\"\n  }, __jsx(Checkbox, {\n    checked: rowId.includes(fetchedProduct.id) && true,\n    onChange: () => {\n      if (rowId.includes(fetchedProduct.id)) {\n        setRowId(rowId.filter(id => id !== fetchedProduct.id));\n        setState({\n          products: state.products.filter(filteredProduct => filteredProduct.id !== fetchedProduct.id)\n        });\n      } else {\n        setRowId([...rowId, fetchedProduct.id]);\n        setState({\n          products: [...state.products, ...fetchedProduct]\n        });\n      }\n    }\n  }), __jsx(Thumbnail, {\n    source: fetchedProduct.image,\n    size: \"small\",\n    alt: \"\"\n  }), __jsx(Header.Content, null, fetchedProduct.title))), __jsx(Table.Cell, {\n    textAlign: \"center\"\n  }, __jsx(TextStyle, {\n    variation: \"subdued\"\n  }, fetchedProduct.variants && toCurrency(fetchedProduct.variants.price))), __jsx(Table.Cell, null, __jsx(TextField, {\n    id: \"percentage-input\",\n    placeholder: \"Bonus Percentage\",\n    value: bonus,\n    onChange: handleBonus,\n    prefix: __jsx(Icon, {\n      name: \"percent\"\n    }),\n    disabled: !rowId.includes(fetchedProduct.id)\n  })));\n};\n\nexport default BranchRow;","map":{"version":3,"sources":["/var/www/transactions-avanta/components/BranchRow.js"],"names":["React","useState","useCallback","useEffect","Thumbnail","Checkbox","TextStyle","TextField","Table","Header","Icon","toCurrency","BranchRow","product","state","setState","branchInfo","rowId","setRowId","fetchedProduct","setFetchedProduct","description","node","id","image","images","edges","originalSrc","tags","title","variants","price","searchValue","setSearchValue","bonus","setBonus","handleSearchInput","newValue","handleBonus","value","products","filter","compareProduct","comparedProduct","branchProducts","items","branchProduct","productId","undefined","console","log","map","item","includes","filteredProduct"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\"\nimport { Thumbnail, Checkbox, TextStyle, TextField } from \"@shopify/polaris\"\nimport { Table, Header, Icon } from \"semantic-ui-react\"\nimport { toCurrency } from \"../utils/helper\"\n\nconst BranchRow = ({ product, state, setState, branchInfo, rowId, setRowId }) => {\n  const [fetchedProduct, setFetchedProduct] = useState({\n    description: product.node.description,\n    id: product.node.id,\n    image: product.node.images.edges[0] ? product.node.images.edges[0].node.originalSrc : \"\",\n    tags: product.node.tags,\n    title: product.node.title,\n    variants: {\n      id: product.node.variants.edges[0].node.id,\n      price: product.node.variants.edges[0].node.price,\n    },\n  })\n\n  const [searchValue, setSearchValue] = useState(null)\n  const [bonus, setBonus] = useState(\"\")\n  const handleSearchInput = useCallback((newValue) => setSearchValue(newValue), [])\n\n  const handleBonus = useCallback((value) => {\n    setBonus(value)\n    fetchedProduct.tags = [value]\n    setFetchedProduct(fetchedProduct)\n    setState({\n      ...state.products.filter((product) => product.id !== fetchedProduct.id),\n      products: [...state.products, fetchedProduct],\n    })\n  }, [])\n\n  const compareProduct = () => {\n    const comparedProduct = branchInfo.branchProducts.items.filter(\n      (branchProduct) => branchProduct.productId === fetchedProduct.id\n    )\n\n    if (!comparedProduct || comparedProduct === undefined) {\n      return\n    }\n\n    setBonus(comparedProduct[0] ? comparedProduct[0].tags && comparedProduct[0].tags[0] : \"\")\n\n    return\n  }\n\n  useEffect(() => {\n    console.log(\n      \"Row id from useEffect\",\n      branchInfo.branchProducts.items\n        .map((item) => item.productId)\n        .filter((productId) => productId === fetchedProduct.id)[0]\n    )\n\n    compareProduct()\n  }, [product, branchInfo])\n\n  console.log(\"Fetched product\", fetchedProduct)\n  console.log(\"Product from branchRow\", product)\n\n  return (\n    <Table.Row key={fetchedProduct.id}>\n      <Table.Cell>\n        <Header as=\"h4\" image className=\"product-header\">\n          <Checkbox\n            checked={rowId.includes(fetchedProduct.id) && true}\n            onChange={() => {\n              if (rowId.includes(fetchedProduct.id)) {\n                setRowId(rowId.filter((id) => id !== fetchedProduct.id))\n                setState({\n                  products: state.products.filter(\n                    (filteredProduct) => filteredProduct.id !== fetchedProduct.id\n                  ),\n                })\n              } else {\n                setRowId([...rowId, fetchedProduct.id])\n                setState({\n                  products: [...state.products, ...fetchedProduct],\n                })\n              }\n            }}\n          />\n          <Thumbnail source={fetchedProduct.image} size=\"small\" alt=\"\" />\n          <Header.Content>{fetchedProduct.title}</Header.Content>\n        </Header>\n      </Table.Cell>\n      <Table.Cell textAlign=\"center\">\n        <TextStyle variation=\"subdued\">\n          {fetchedProduct.variants && toCurrency(fetchedProduct.variants.price)}\n        </TextStyle>\n      </Table.Cell>\n      <Table.Cell>\n        <TextField\n          id=\"percentage-input\"\n          placeholder=\"Bonus Percentage\"\n          value={bonus}\n          onChange={handleBonus}\n          prefix={<Icon name=\"percent\" />}\n          disabled={!rowId.includes(fetchedProduct.id)}\n        />\n      </Table.Cell>\n    </Table.Row>\n  )\n}\n\nexport default BranchRow\n"]},"metadata":{},"sourceType":"module"}