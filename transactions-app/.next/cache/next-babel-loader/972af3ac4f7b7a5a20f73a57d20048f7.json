{"ast":null,"code":"var _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport { Page, Card, Toast, Frame, Tabs, Button } from \"@shopify/polaris\";\nimport config from \"../aws-exports\";\nimport AcceptedPaymentRequest from \"./AcceptedPaymentRequest\";\nimport PendingPaymentRequest from \"./PendingPaymentRequest\";\nimport DeclinedPaymentRequest from \"./DeclinedPaymentRequest\";\nimport { onUpdatePaymentSubscription, paymentSubscription } from \"../graphql/subscriptions\";\nAPI.configure(config);\n\nvar AcceptPayment = function AcceptPayment(_ref) {\n  _s();\n\n  var branchId = _ref.branchId,\n      setShowPaymentRequest = _ref.setShowPaymentRequest;\n\n  var _useState = useState(false),\n      activeToast = _useState[0],\n      setActiveToast = _useState[1];\n\n  var _useState2 = useState(0),\n      selected = _useState2[0],\n      setSelected = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      createUpdatePaymentSubscription = _useState3[0],\n      setCreateUpdatePaymentSubscription = _useState3[1];\n\n  var handleTabChange = useCallback(function (selectedTabIndex) {\n    return setSelected(selectedTabIndex);\n  }, []);\n  useEffect(function () {\n    var listener = API.graphql(graphqlOperation(paymentSubscription)).subscribe({\n      next: function next(paymentResponse) {\n        setCreateUpdatePaymentSubscription(paymentResponse);\n      }\n    });\n    var onUpdatePayment = API.graphql(graphqlOperation(onUpdatePaymentSubscription)).subscribe({\n      next: function next(onUpdatePaymentResponse) {\n        setCreateUpdatePaymentSubscription(onUpdatePaymentResponse);\n      }\n    });\n    return function () {\n      listener.unsubscribe();\n      onUpdatePayment.unsubscribe();\n    };\n  }, []);\n  var tabs = [{\n    id: \"pending-payments\",\n    content: \"Pending Payment Requests\",\n    accessibilityLabel: \"Pending Requests\",\n    panelID: \"pending-payments-content\"\n  }, {\n    id: \"accepted-payments\",\n    content: \"Accepted Payment Requests\",\n    accessibilityLabel: \"Accepted Request\",\n    panelID: \"accepted-payments-content\"\n  }, {\n    id: \"declined-payments\",\n    content: \"Declined Payment Requests\",\n    accessibilityLabel: \"Declined Requests\",\n    panelID: \"declined-payments-content\"\n  }];\n  var toastMarkup = activeToast ? __jsx(Toast, {\n    content: \"Order has been successfully created\",\n    onDismiss: function onDismiss() {\n      return setActiveToast(false);\n    }\n  }) : null;\n\n  var renderPaymentRequest = function renderPaymentRequest(selected) {\n    switch (selected) {\n      case 0:\n        return __jsx(PendingPaymentRequest, {\n          branchId: branchId,\n          createUpdatePaymentSubscription: createUpdatePaymentSubscription\n        });\n\n      case 1:\n        return __jsx(AcceptedPaymentRequest, {\n          branchId: branchId\n        });\n\n      case 2:\n        return __jsx(DeclinedPaymentRequest, {\n          branchId: branchId\n        });\n\n      default:\n        return;\n    }\n  };\n\n  return __jsx(Frame, null, __jsx(Page, {\n    title: \"Payment Request\"\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return setShowPaymentRequest(false);\n    }\n  }, \"Go back\"), __jsx(Card, null, __jsx(Tabs, {\n    tabs: tabs,\n    selected: selected,\n    onSelect: handleTabChange\n  }, __jsx(Card.Section, {\n    title: tabs[selected].content\n  }, renderPaymentRequest(selected)))), toastMarkup));\n};\n\n_s(AcceptPayment, \"MNZ0zSWtt3r7VmLTmjWlySAJXMk=\");\n\n_c = AcceptPayment;\nexport default AcceptPayment;\n\nvar _c;\n\n$RefreshReg$(_c, \"AcceptPayment\");","map":{"version":3,"sources":["/var/www/transactions-avanta/components/PaymentRequest.js"],"names":["React","useState","useCallback","useEffect","API","graphqlOperation","Page","Card","Toast","Frame","Tabs","Button","config","AcceptedPaymentRequest","PendingPaymentRequest","DeclinedPaymentRequest","onUpdatePaymentSubscription","paymentSubscription","configure","AcceptPayment","branchId","setShowPaymentRequest","activeToast","setActiveToast","selected","setSelected","createUpdatePaymentSubscription","setCreateUpdatePaymentSubscription","handleTabChange","selectedTabIndex","listener","graphql","subscribe","next","paymentResponse","onUpdatePayment","onUpdatePaymentResponse","unsubscribe","tabs","id","content","accessibilityLabel","panelID","toastMarkup","renderPaymentRequest"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\"\nimport { API, graphqlOperation } from \"aws-amplify\"\nimport { Page, Card, Toast, Frame, Tabs, Button } from \"@shopify/polaris\"\nimport config from \"../aws-exports\"\nimport AcceptedPaymentRequest from \"./AcceptedPaymentRequest\"\nimport PendingPaymentRequest from \"./PendingPaymentRequest\"\nimport DeclinedPaymentRequest from \"./DeclinedPaymentRequest\"\nimport { onUpdatePaymentSubscription, paymentSubscription } from \"../graphql/subscriptions\"\n\nAPI.configure(config)\n\nconst AcceptPayment = ({ branchId, setShowPaymentRequest }) => {\n  const [activeToast, setActiveToast] = useState(false)\n  const [selected, setSelected] = useState(0)\n  const [createUpdatePaymentSubscription, setCreateUpdatePaymentSubscription] = useState(\"\")\n\n  const handleTabChange = useCallback((selectedTabIndex) => setSelected(selectedTabIndex), [])\n\n  useEffect(() => {\n    const listener = API.graphql(graphqlOperation(paymentSubscription)).subscribe({\n      next: (paymentResponse) => {\n        setCreateUpdatePaymentSubscription(paymentResponse)\n      },\n    })\n\n    const onUpdatePayment = API.graphql(graphqlOperation(onUpdatePaymentSubscription)).subscribe({\n      next: (onUpdatePaymentResponse) => {\n        setCreateUpdatePaymentSubscription(onUpdatePaymentResponse)\n      },\n    })\n\n    return () => {\n      listener.unsubscribe()\n      onUpdatePayment.unsubscribe()\n    }\n  }, [])\n\n  const tabs = [\n    {\n      id: \"pending-payments\",\n      content: \"Pending Payment Requests\",\n      accessibilityLabel: \"Pending Requests\",\n      panelID: \"pending-payments-content\",\n    },\n    {\n      id: \"accepted-payments\",\n      content: \"Accepted Payment Requests\",\n      accessibilityLabel: \"Accepted Request\",\n      panelID: \"accepted-payments-content\",\n    },\n    {\n      id: \"declined-payments\",\n      content: \"Declined Payment Requests\",\n      accessibilityLabel: \"Declined Requests\",\n      panelID: \"declined-payments-content\",\n    },\n  ]\n\n  const toastMarkup = activeToast ? (\n    <Toast content=\"Order has been successfully created\" onDismiss={() => setActiveToast(false)} />\n  ) : null\n\n  const renderPaymentRequest = (selected) => {\n    switch (selected) {\n      case 0:\n        return (\n          <PendingPaymentRequest\n            branchId={branchId}\n            createUpdatePaymentSubscription={createUpdatePaymentSubscription}\n          />\n        )\n      case 1:\n        return <AcceptedPaymentRequest branchId={branchId} />\n      case 2:\n        return <DeclinedPaymentRequest branchId={branchId} />\n      default:\n        return\n    }\n  }\n\n  return (\n    <Frame>\n      <Page title=\"Payment Request\">\n        <Button onClick={() => setShowPaymentRequest(false)}>Go back</Button>\n        <Card>\n          <Tabs tabs={tabs} selected={selected} onSelect={handleTabChange}>\n            <Card.Section title={tabs[selected].content}>\n              {renderPaymentRequest(selected)}\n            </Card.Section>\n          </Tabs>\n        </Card>\n        {toastMarkup}\n      </Page>\n    </Frame>\n  )\n}\n\nexport default AcceptPayment\n"]},"metadata":{},"sourceType":"module"}